<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√≥dulo 5 - Modelado y Consultas SQL (PostgreSQL)</title>
    <script src="query-executor.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #fff;
            background: linear-gradient(135deg, #4a5bc4 0%, #5d3680 100%);
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #5568d3 0%, #6a3f8f 100%);
            color: #ffffff;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .nav-tabs {
            background: #f8f9fa;
            display: flex;
            flex-wrap: wrap;
            border-bottom: 3px solid #5568d3;
            padding: 0 20px;
        }

        .nav-tabs button {
            background: none;
            border: none;
            padding: 15px 25px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            margin-bottom: -3px;
            font-weight: 600;
            color: #555;
        }

        .nav-tabs button:hover {
            background: rgba(102, 126, 234, 0.1);
            color: #0d1747;
        }

        .nav-tabs button.active {
            color: #0d1747;
            border-bottom-color: #0d1747;
            background: white;
        }

        .content {
            padding: 40px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            color: #5568d3;
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #5568d3;
        }

        .section h3 {
            color: #6a3f8f;
            font-size: 1.5em;
            margin: 30px 0 15px 0;
            display: flex;
            align-items: center;
        }

        .section h3::before {
            content: "‚ñ∏";
            margin-right: 10px;
            color: #5568d3;
        }

        .card {
            background: #f8f9fa;
            border-left: 4px solid #5568d3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .card h4 {
            color: #5568d3;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .card ul li {
            color: #333;
            margin: 8px 0;
            line-height: 1.6;
        }

        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.9em;
            line-height: 1.5;
            margin: 15px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .sql-keyword {
            color: #ff79c6;
            font-weight: bold;
        }

        .sql-string {
            color: #f1fa8c;
        }

        .sql-comment {
            color: #6272a4;
            font-style: italic;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        thead {
            background: linear-gradient(135deg, #5568d3 0%, #6a3f8f 100%);
            color: #ffffff;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
            color: #333;
        }

        th {
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.9em;
            letter-spacing: 0.5px;
            color: #ffffff;
        }

        tbody tr:hover {
            background: #f5f5f5;
        }

        tbody tr:last-child td {
            border-bottom: none;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
        }

        .badge-success {
            background: #d4edda;
            color: #155724;
        }

        .badge-warning {
            background: #fff3cd;
            color: #856404;
        }

        .badge-danger {
            background: #f8d7da;
            color: #721c24;
        }

        .badge-info {
            background: #d1ecf1;
            color: #0c5460;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #5568d3 0%, #6a3f8f 100%);
            color: #ffffff;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(85, 104, 211, 0.3);
        }

        .stat-card h3 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #ffffff;
        }

        .stat-card h3::before {
            display: none;
        }

        .stat-card p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .diagram-container {
            text-align: center;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 12px;
            margin: 20px 0;
        }

        .diagram-container img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .highlight {
            background: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }

        .entity-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .entity-card {
            background: white;
            border: 2px solid #5568d3;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .entity-card h4 {
            color: #5568d3;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .entity-card ul {
            list-style: none;
            padding-left: 0;
        }

        .entity-card li {
            padding: 5px 0;
            color: #555;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .entity-card li::before {
            content: "‚Ä¢ ";
            color: #5568d3;
            font-weight: bold;
        }

        footer {
            background: #2d2d2d;
            color: white;
            text-align: center;
            padding: 30px;
            margin-top: 40px;
        }

        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid;
        }

        .alert-info {
            background: #d1ecf1;
            border-color: #0c5460;
            color: #0c5460;
        }

        .alert-success {
            background: #d4edda;
            border-color: #155724;
            color: #155724;
        }

        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #a91e5c;
        }

        .screenshot-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
        }

        .screenshot-container img {
            max-width: 100%;
            border: 2px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .screenshot-container p {
            margin-top: 10px;
            color: #666;
            font-style: italic;
        }

        .code-block {
            position: relative;
            margin: 20px 0;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #5568d3;
            color: #ffffff;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.3s;
            z-index: 10;
        }

        .copy-btn:hover {
            background: #764ba2;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .copy-btn:active {
            transform: translateY(0);
        }

        .copy-btn.copied {
            background: #28a745;
        }

        .copy-btn.copied::after {
            content: " ‚úì";
        }

        .execute-btn {
            position: absolute;
            top: 10px;
            right: 150px;
            background: #1e7e34;
            color: #ffffff;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.3s;
            z-index: 10;
        }

        .execute-btn:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .execute-btn:active {
            transform: translateY(0);
        }

        .execute-btn.executing {
            background: #ffc107;
            cursor: wait;
        }

        .execute-btn.executed {
            background: #17a2b8;
        }

        .query-results {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px solid #28a745;
            animation: slideDown 0.5s;
        }

        .query-results.show {
            display: block;
        }

        .query-results h4 {
            color: #28a745;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .query-results h4::before {
            content: "‚úì";
            margin-right: 10px;
            font-size: 1.2em;
        }

        .query-results h5 {
            color: #5568d3;
            margin: 20px 0 10px 0;
            font-size: 1.1em;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .execution-log {
            background: #2d2d2d;
            color: #00ff00;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            margin-bottom: 15px;
            max-height: 200px;
            overflow-y: auto;
        }

        .execution-log p {
            margin: 5px 0;
        }

        @media (max-width: 768px) {
            .execute-btn {
                right: 10px;
                top: 50px;
            }
            header h1 {
                font-size: 1.8em;
            }

            .nav-tabs {
                flex-direction: column;
            }

            .nav-tabs button {
                width: 100%;
                text-align: left;
            }

            .content {
                padding: 20px;
            }

            .grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìä M√≥dulo 5 - Modelado y Consultas SQL</h1>
            <p>Sistema E-Commerce con PostgreSQL</p>
        </header>

        <nav class="nav-tabs">
            <button class="tab-button active" onclick="openTab(event, 'overview')">üè† Resumen</button>
            <button class="tab-button" onclick="openTab(event, 'diagram')">üìê Diagrama ER</button>
            <button class="tab-button" onclick="openTab(event, 'ddl')">üèóÔ∏è DDL - Tablas</button>
            <button class="tab-button" onclick="openTab(event, 'dml')">üìù DML - Datos</button>
            <button class="tab-button" onclick="openTab(event, 'queries')">üîç Consultas</button>
            <button class="tab-button" onclick="openTab(event, 'results')">üìà Resultados</button>
            <button class="tab-button" onclick="openTab(event, 'evidence')">‚úÖ Evidencias</button>
        </nav>

        <div class="content">
            <!-- TAB: RESUMEN -->
            <div id="overview" class="tab-content active">
                <div class="section">
                    <h2>üìã Descripci√≥n del Proyecto</h2>
                    <p>Este proyecto implementa un <strong>sistema completo de base de datos relacional para un e-commerce</strong> utilizando PostgreSQL. El proyecto cumple con todos los requisitos del M√≥dulo 5:</p>

                    <div class="grid">
                        <div class="stat-card">
                            <h3>5</h3>
                            <p>Entidades Principales</p>
                        </div>
                        <div class="stat-card">
                            <h3>5+</h3>
                            <p>Consultas SQL Avanzadas</p>
                        </div>
                        <div class="stat-card">
                            <h3>7</h3>
                            <p>Usuarios Registrados</p>
                        </div>
                        <div class="stat-card">
                            <h3>12</h3>
                            <p>Productos en Cat√°logo</p>
                        </div>
                    </div>

                    <div class="card">
                        <h4>üéØ Funcionalidades Implementadas</h4>
                        <ul style="padding-left: 20px;">
                            <li><strong>Modelado ER:</strong> Diagrama completo con 5 entidades y relaciones bien definidas</li>
                            <li><strong>DDL:</strong> Creaci√≥n de tablas con PK, FK, CHECK, UNIQUE y √≠ndices optimizados</li>
                            <li><strong>DML:</strong> Poblamiento con datos realistas (7 usuarios, 12 productos, 14+ √≥rdenes)</li>
                            <li><strong>Consulta 1:</strong> Oferta verano con descuento del 20%</li>
                            <li><strong>Consulta 2:</strong> Identificaci√≥n de stock cr√≠tico (‚â§ 5 unidades)</li>
                            <li><strong>Consulta 3:</strong> Simulaci√≥n de compra con c√°lculo de IVA 19%</li>
                            <li><strong>Consulta 4:</strong> Total de ventas de diciembre 2022</li>
                            <li><strong>Consulta 5:</strong> Usuario con m√°s compras del a√±o 2022</li>
                        </ul>
                    </div>

                    <h3>Entidades del Sistema</h3>
                    <div class="entity-list">
                        <div class="entity-card">
                            <h4>üë• USUARIOS</h4>
                            <ul>
                                <li>id_usuario (PK)</li>
                                <li>nombre</li>
                                <li>email (UNIQUE)</li>
                                <li>creado_en</li>
                            </ul>
                        </div>
                        <div class="entity-card">
                            <h4>üì¶ PRODUCTOS</h4>
                            <ul>
                                <li>id_producto (PK)</li>
                                <li>nombre</li>
                                <li>precio</li>
                                <li>activo</li>
                            </ul>
                        </div>
                        <div class="entity-card">
                            <h4>üìä INVENTARIO</h4>
                            <ul>
                                <li>id_producto (PK, FK)</li>
                                <li>stock</li>
                            </ul>
                        </div>
                        <div class="entity-card">
                            <h4>üõí ORDENES</h4>
                            <ul>
                                <li>id_orden (PK)</li>
                                <li>id_usuario (FK)</li>
                                <li>fecha</li>
                                <li>total</li>
                            </ul>
                        </div>
                        <div class="entity-card">
                            <h4>üìã ORDEN_ITEMS</h4>
                            <ul>
                                <li>id_item (PK)</li>
                                <li>id_orden (FK)</li>
                                <li>id_producto (FK)</li>
                                <li>cantidad</li>
                                <li>precio_unitario</li>
                            </ul>
                        </div>
                    </div>

                    <div class="alert alert-info">
                        <strong>‚ÑπÔ∏è Informaci√≥n:</strong> Este proyecto fue desarrollado como parte del portafolio del M√≥dulo 5 - Talento Digital. Incluye modelado ER, DDL, DML y consultas SQL avanzadas en PostgreSQL.
                    </div>
                </div>
            </div>

            <!-- TAB: DIAGRAMA ER -->
            <div id="diagram" class="tab-content">
                <div class="section">
                    <h2>üìê Diagrama Entidad-Relaci√≥n (ER)</h2>

                    <div class="card">
                        <h4>Relaciones entre Entidades</h4>
                        <ul style="padding-left: 20px;">
                            <li><strong>USUARIOS ‚Üí ORDENES:</strong> Relaci√≥n 1:N (Un usuario puede tener m√∫ltiples √≥rdenes)</li>
                            <li><strong>ORDENES ‚Üí ORDEN_ITEMS:</strong> Relaci√≥n 1:N (Una orden puede tener m√∫ltiples √≠tems)</li>
                            <li><strong>PRODUCTOS ‚Üí ORDEN_ITEMS:</strong> Relaci√≥n 1:N (Un producto puede estar en m√∫ltiples √≠tems)</li>
                            <li><strong>PRODUCTOS ‚Üí INVENTARIO:</strong> Relaci√≥n 1:1 (Cada producto tiene un registro de inventario)</li>
                        </ul>
                    </div>

                    <h3>Diagrama Entidad-Relaci√≥n</h3>
                    <div class="diagram-container">
                        <div style="background: white; padding: 30px; border-radius: 8px; text-align: left;">
                            <svg width="100%" viewBox="0 0 1000 600" style="max-width: 1000px; margin: 0 auto; display: block;">
                                <!-- USUARIOS -->
                                <g>
                                    <rect x="50" y="50" width="200" height="150" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="5"/>
                                    <rect x="50" y="50" width="200" height="40" fill="#1976d2" rx="5"/>
                                    <text x="150" y="75" text-anchor="middle" fill="white" font-weight="bold" font-size="16">USUARIOS</text>
                                    <text x="60" y="110" fill="#333" font-size="14">üîë id_usuario (PK)</text>
                                    <text x="60" y="135" fill="#333" font-size="14">üìù nombre</text>
                                    <text x="60" y="160" fill="#333" font-size="14">üìß email (UNIQUE)</text>
                                    <text x="60" y="185" fill="#333" font-size="14">üìÖ creado_en</text>
                                </g>

                                <!-- ORDENES -->
                                <g>
                                    <rect x="400" y="50" width="200" height="150" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="5"/>
                                    <rect x="400" y="50" width="200" height="40" fill="#f57c00" rx="5"/>
                                    <text x="500" y="75" text-anchor="middle" fill="white" font-weight="bold" font-size="16">ORDENES</text>
                                    <text x="410" y="110" fill="#333" font-size="14">üîë id_orden (PK)</text>
                                    <text x="410" y="135" fill="#333" font-size="14">üîó id_usuario (FK)</text>
                                    <text x="410" y="160" fill="#333" font-size="14">üìÖ fecha</text>
                                    <text x="410" y="185" fill="#333" font-size="14">üí∞ total</text>
                                </g>

                                <!-- PRODUCTOS -->
                                <g>
                                    <rect x="50" y="350" width="200" height="150" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2" rx="5"/>
                                    <rect x="50" y="350" width="200" height="40" fill="#7b1fa2" rx="5"/>
                                    <text x="150" y="375" text-anchor="middle" fill="white" font-weight="bold" font-size="16">PRODUCTOS</text>
                                    <text x="60" y="410" fill="#333" font-size="14">üîë id_producto (PK)</text>
                                    <text x="60" y="435" fill="#333" font-size="14">üìù nombre</text>
                                    <text x="60" y="460" fill="#333" font-size="14">üíµ precio</text>
                                    <text x="60" y="485" fill="#333" font-size="14">‚úÖ activo</text>
                                </g>

                                <!-- INVENTARIO -->
                                <g>
                                    <rect x="400" y="350" width="200" height="120" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" rx="5"/>
                                    <rect x="400" y="350" width="200" height="40" fill="#388e3c" rx="5"/>
                                    <text x="500" y="375" text-anchor="middle" fill="white" font-weight="bold" font-size="16">INVENTARIO</text>
                                    <text x="410" y="410" fill="#333" font-size="14">üîë id_producto (PK, FK)</text>
                                    <text x="410" y="435" fill="#333" font-size="14">üì¶ stock</text>
                                </g>

                                <!-- ORDEN_ITEMS -->
                                <g>
                                    <rect x="750" y="200" width="200" height="170" fill="#fce4ec" stroke="#c2185b" stroke-width="2" rx="5"/>
                                    <rect x="750" y="200" width="200" height="40" fill="#c2185b" rx="5"/>
                                    <text x="850" y="225" text-anchor="middle" fill="white" font-weight="bold" font-size="16">ORDEN_ITEMS</text>
                                    <text x="760" y="260" fill="#333" font-size="14">üîë id_item (PK)</text>
                                    <text x="760" y="285" fill="#333" font-size="14">üîó id_orden (FK)</text>
                                    <text x="760" y="310" fill="#333" font-size="14">üîó id_producto (FK)</text>
                                    <text x="760" y="335" fill="#333" font-size="14">üî¢ cantidad</text>
                                    <text x="760" y="360" fill="#333" font-size="14">üíµ precio_unitario</text>
                                </g>

                                <!-- Relaci√≥n USUARIOS -> ORDENES (1:N) -->
                                <line x1="250" y1="125" x2="400" y2="125" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                                <text x="310" y="115" fill="#666" font-size="12" font-weight="bold">1:N</text>

                                <!-- Relaci√≥n ORDENES -> ORDEN_ITEMS (1:N) -->
                                <path d="M 600 125 L 700 125 L 700 285 L 750 285" fill="none" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                                <text x="680" y="180" fill="#666" font-size="12" font-weight="bold">1:N</text>

                                <!-- Relaci√≥n PRODUCTOS -> INVENTARIO (1:1) -->
                                <line x1="250" y1="425" x2="400" y2="410" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                                <text x="310" y="410" fill="#666" font-size="12" font-weight="bold">1:1</text>

                                <!-- Relaci√≥n PRODUCTOS -> ORDEN_ITEMS (1:N) -->
                                <path d="M 150 350 L 150 285 L 750 285" fill="none" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                                <text x="400" y="275" fill="#666" font-size="12" font-weight="bold">1:N</text>

                                <!-- Definici√≥n de flechas -->
                                <defs>
                                    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                        <polygon points="0 0, 10 3, 0 6" fill="#666" />
                                    </marker>
                                </defs>
                            </svg>
                        </div>
                        <p><em>Diagrama ER mostrando las 5 entidades principales y sus relaciones</em></p>
                    </div>

                    <div class="alert alert-success">
                        <strong>‚úÖ Integridad Referencial:</strong> El modelo incluye constraints de ON DELETE CASCADE y RESTRICT para mantener la integridad de los datos.
                    </div>
                </div>
            </div>

            <!-- TAB: DDL -->
            <div id="ddl" class="tab-content">
                <div class="section">
                    <h2>üèóÔ∏è DDL - Creaci√≥n de Tablas</h2>

                    <h3>Tabla: USUARIOS</h3>
                    <pre><code class="language-sql">CREATE TABLE usuarios (
    id_usuario SERIAL PRIMARY KEY,
    nombre TEXT NOT NULL,
    email TEXT UNIQUE NOT NULL,
    creado_en TIMESTAMP DEFAULT NOW()
);</code></pre>

                    <h3>Tabla: PRODUCTOS</h3>
                    <pre><code class="language-sql">CREATE TABLE productos (
    id_producto SERIAL PRIMARY KEY,
    nombre TEXT NOT NULL,
    precio NUMERIC(10, 2) NOT NULL CHECK (precio >= 0),
    activo BOOLEAN DEFAULT TRUE
);</code></pre>

                    <h3>Tabla: INVENTARIO</h3>
                    <pre><code class="language-sql">CREATE TABLE inventario (
    id_producto INT PRIMARY KEY,
    stock INT NOT NULL DEFAULT 0 CHECK (stock >= 0),
    CONSTRAINT fk_inventario_producto
        FOREIGN KEY (id_producto)
        REFERENCES productos(id_producto)
        ON DELETE CASCADE
);</code></pre>

                    <h3>Tabla: ORDENES</h3>
                    <pre><code class="language-sql">CREATE TABLE ordenes (
    id_orden SERIAL PRIMARY KEY,
    id_usuario INT NOT NULL,
    fecha DATE NOT NULL DEFAULT CURRENT_DATE,
    total NUMERIC(12, 2) DEFAULT 0,
    CONSTRAINT fk_ordenes_usuario
        FOREIGN KEY (id_usuario)
        REFERENCES usuarios(id_usuario)
        ON DELETE RESTRICT
);</code></pre>

                    <h3>Tabla: ORDEN_ITEMS</h3>
                    <pre><code class="language-sql">CREATE TABLE orden_items (
    id_item SERIAL PRIMARY KEY,
    id_orden INT NOT NULL,
    id_producto INT NOT NULL,
    cantidad INT NOT NULL CHECK (cantidad > 0),
    precio_unitario NUMERIC(10, 2) NOT NULL CHECK (precio_unitario >= 0),
    CONSTRAINT fk_orden_items_orden
        FOREIGN KEY (id_orden)
        REFERENCES ordenes(id_orden)
        ON DELETE CASCADE,
    CONSTRAINT fk_orden_items_producto
        FOREIGN KEY (id_producto)
        REFERENCES productos(id_producto)
        ON DELETE RESTRICT
);</code></pre>

                    <h3>√çndices para Optimizaci√≥n</h3>
                    <pre><code class="language-sql">-- √çndices para mejorar el rendimiento de consultas
CREATE INDEX idx_ordenes_fecha ON ordenes(fecha);
CREATE INDEX idx_ordenes_usuario ON ordenes(id_usuario);
CREATE INDEX idx_orden_items_orden ON orden_items(id_orden);
CREATE INDEX idx_orden_items_producto ON orden_items(id_producto);
CREATE INDEX idx_usuarios_email ON usuarios(email);</code></pre>

                    <div class="card">
                        <h4>üîí Caracter√≠sticas de Seguridad e Integridad</h4>
                        <ul style="padding-left: 20px;">
                            <li><strong>Primary Keys (PK):</strong> En todas las tablas para identificaci√≥n √∫nica</li>
                            <li><strong>Foreign Keys (FK):</strong> Para mantener integridad referencial</li>
                            <li><strong>CHECK Constraints:</strong> stock >= 0, cantidad > 0, precio >= 0</li>
                            <li><strong>UNIQUE Constraints:</strong> email √∫nico en usuarios</li>
                            <li><strong>DEFAULT Values:</strong> Timestamps autom√°ticos, valores booleanos</li>
                            <li><strong>ON DELETE CASCADE:</strong> En inventario y orden_items</li>
                            <li><strong>ON DELETE RESTRICT:</strong> En √≥rdenes y productos (protecci√≥n)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- TAB: DML -->
            <div id="dml" class="tab-content">
                <div class="section">
                    <h2>üìù DML - Poblamiento de Datos</h2>

                    <h3>Usuarios Registrados (7 usuarios)</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nombre</th>
                                <th>Email</th>
                                <th>Creado</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>Mar√≠a Gonz√°lez</td>
                                <td>maria.gonzalez@email.com</td>
                                <td>2022-01-15</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Juan P√©rez</td>
                                <td>juan.perez@email.com</td>
                                <td>2022-02-20</td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Ana Mart√≠nez</td>
                                <td>ana.martinez@email.com</td>
                                <td>2022-03-10</td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>Carlos Rodr√≠guez</td>
                                <td>carlos.rodriguez@email.com</td>
                                <td>2022-04-05</td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>Laura Fern√°ndez</td>
                                <td>laura.fernandez@email.com</td>
                                <td>2022-05-12</td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td>Pedro L√≥pez</td>
                                <td>pedro.lopez@email.com</td>
                                <td>2022-06-08</td>
                            </tr>
                            <tr>
                                <td>7</td>
                                <td>Sof√≠a Torres</td>
                                <td>sofia.torres@email.com</td>
                                <td>2022-07-22</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>Cat√°logo de Productos (12 productos)</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Producto</th>
                                <th>Precio Original</th>
                                <th>Stock</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>Laptop HP 15"</td>
                                <td>$599,990</td>
                                <td>15</td>
                                <td><span class="badge badge-success">Activo</span></td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Mouse Logitech MX Master</td>
                                <td>$49,990</td>
                                <td>45</td>
                                <td><span class="badge badge-success">Activo</span></td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Teclado Mec√°nico RGB</td>
                                <td>$79,990</td>
                                <td>32</td>
                                <td><span class="badge badge-success">Activo</span></td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>Monitor Samsung 24"</td>
                                <td>$189,990</td>
                                <td>8</td>
                                <td><span class="badge badge-success">Activo</span></td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>Aud√≠fonos Sony WH-1000XM4</td>
                                <td>$249,990</td>
                                <td>22</td>
                                <td><span class="badge badge-success">Activo</span></td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td>WebCam Logitech HD</td>
                                <td>$39,990</td>
                                <td>3</td>
                                <td><span class="badge badge-danger">Stock Cr√≠tico</span></td>
                            </tr>
                            <tr>
                                <td>7</td>
                                <td>Disco Duro Externo 1TB</td>
                                <td>$59,990</td>
                                <td>28</td>
                                <td><span class="badge badge-success">Activo</span></td>
                            </tr>
                            <tr>
                                <td>8</td>
                                <td>Memoria RAM 16GB DDR4</td>
                                <td>$69,990</td>
                                <td>5</td>
                                <td><span class="badge badge-warning">Stock Bajo</span></td>
                            </tr>
                            <tr>
                                <td>9</td>
                                <td>SSD Samsung 500GB</td>
                                <td>$89,990</td>
                                <td>18</td>
                                <td><span class="badge badge-success">Activo</span></td>
                            </tr>
                            <tr>
                                <td>10</td>
                                <td>Hub USB-C 7 puertos</td>
                                <td>$29,990</td>
                                <td>2</td>
                                <td><span class="badge badge-danger">Stock Cr√≠tico</span></td>
                            </tr>
                            <tr>
                                <td>11</td>
                                <td>Cable HDMI 2.0 3m</td>
                                <td>$12,990</td>
                                <td>65</td>
                                <td><span class="badge badge-success">Activo</span></td>
                            </tr>
                            <tr>
                                <td>12</td>
                                <td>Mousepad Gaming XXL</td>
                                <td>$19,990</td>
                                <td>4</td>
                                <td><span class="badge badge-warning">Stock Bajo</span></td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="alert alert-success">
                        <strong>‚úÖ Datos Poblados:</strong> 7 usuarios, 12 productos, 14 √≥rdenes y 40+ items de orden con datos realistas y coherentes.
                    </div>
                </div>
            </div>

            <!-- TAB: CONSULTAS -->
            <div id="queries" class="tab-content">
                <div class="section">
                    <h2>üîç Consultas SQL Requeridas</h2>

                    <div class="card">
                        <h4>1Ô∏è‚É£ Oferta Verano - Descuento del 20%</h4>
                        <p><strong>Descripci√≥n:</strong> Actualizar todos los productos aplicando un descuento del 20% (precio final = precio * 0.80)</p>

                        <div class="code-block">
                            <button class="execute-btn" onclick="executeQuery(this, 'query1')">‚ñ∂ Ejecutar SQL</button>
                            <button class="copy-btn" onclick="copyCode(this, 'query1')">üìã Copiar</button>
                            <pre><code class="language-sql" id="query1">-- ============================================================================
-- CONSULTA 1: OFERTA VERANO - Descuento del 20%
-- ============================================================================

-- Paso 1: Ver precios actuales ANTES del descuento
SELECT
    id_producto,
    nombre,
    precio AS precio_original
FROM productos
ORDER BY id_producto;

-- Paso 2: Aplicar descuento del 20% (precio * 0.80)
UPDATE productos
SET precio = ROUND(precio * 0.80, 2);

-- Paso 3: Verificar precios actualizados DESPU√âS del descuento
SELECT
    id_producto,
    nombre,
    precio AS precio_con_descuento,
    ROUND(precio / 0.80, 2) AS precio_original,
    ROUND(precio / 0.80 - precio, 2) AS ahorro
FROM productos
ORDER BY id_producto;</code></pre>
                        </div>

                        <div class="query-results" id="results-query1"></div>

                        <p><strong>‚úÖ Resultado:</strong> Todos los productos actualizados con 20% de descuento. Por ejemplo: Laptop de $599,990 ‚Üí $479,992</p>
                    </div>

                    <div class="card">
                        <h4>2Ô∏è‚É£ Stock Cr√≠tico - Productos con ‚â§ 5 unidades</h4>
                        <p><strong>Descripci√≥n:</strong> Identificar productos con stock cr√≠tico (‚â§ 5 unidades) que requieren reposici√≥n urgente</p>

                        <div class="code-block">
                            <button class="execute-btn" onclick="executeQuery(this, 'query2')">‚ñ∂ Ejecutar SQL</button>
                            <button class="copy-btn" onclick="copyCode(this, 'query2')">üìã Copiar</button>
                            <pre><code class="language-sql" id="query2">-- ============================================================================
-- CONSULTA 2: STOCK CR√çTICO - Productos con stock <= 5 unidades
-- ============================================================================

SELECT
    p.id_producto,
    p.nombre AS producto,
    i.stock,
    CASE
        WHEN i.stock = 0 THEN 'SIN STOCK'
        WHEN i.stock <= 2 THEN 'CR√çTICO'
        WHEN i.stock <= 5 THEN 'BAJO'
        ELSE 'NORMAL'
    END AS estado_stock,
    CASE
        WHEN i.stock = 0 THEN 'REPONER INMEDIATAMENTE'
        WHEN i.stock <= 2 THEN 'REPOSICI√ìN URGENTE'
        WHEN i.stock <= 5 THEN 'PROGRAMAR REPOSICI√ìN'
        ELSE 'NO REQUIERE ACCI√ìN'
    END AS accion_recomendada
FROM inventario i
JOIN productos p ON i.id_producto = p.id_producto
WHERE i.stock <= 5
ORDER BY i.stock ASC, p.nombre;</code></pre>
                        </div>

                        <div class="query-results" id="results-query2"></div>

                        <p><strong>‚úÖ Resultado:</strong> 4 productos con stock cr√≠tico: Hub USB-C (2), WebCam (3), Mousepad (4), RAM (5)</p>
                    </div>

                    <div class="card">
                        <h4>3Ô∏è‚É£ Simulaci√≥n de Compra - M√≠nimo 3 productos con IVA 19%</h4>
                        <p><strong>Descripci√≥n:</strong> Simular una compra completa con al menos 3 productos, calculando subtotal, IVA (19%) y total</p>

                        <div class="code-block">
                            <button class="execute-btn" onclick="executeQuery(this, 'query3')">‚ñ∂ Ejecutar SQL</button>
                            <button class="copy-btn" onclick="copyCode(this, 'query3')">üìã Copiar</button>
                            <pre><code class="language-sql" id="query3">-- ============================================================================
-- CONSULTA 3: SIMULACI√ìN DE COMPRA - M√≠nimo 3 productos con IVA 19%
-- ============================================================================

-- Paso 1: Crear la nueva orden y capturar el ID
DO $$
DECLARE
    nueva_orden_id INT;
    subtotal_calculado NUMERIC(12,2);
    iva_19_calculado NUMERIC(12,2);
    total_con_iva NUMERIC(12,2);
BEGIN
    -- Insertar nueva orden
    INSERT INTO ordenes (id_usuario, fecha, total)
    VALUES (1, '2022-12-15', 0)
    RETURNING id_orden INTO nueva_orden_id;

    RAISE NOTICE 'Orden creada con ID: %', nueva_orden_id;

    -- Paso 2: Insertar items de la orden (m√≠nimo 3 productos)
    INSERT INTO orden_items (id_orden, id_producto, cantidad, precio_unitario)
    VALUES
        (nueva_orden_id, 1, 1, 899.99),  -- Laptop
        (nueva_orden_id, 4, 2, 45.99),   -- Mouse Inal√°mbrico
        (nueva_orden_id, 8, 1, 149.99);  -- Auriculares

    -- Paso 3: Calcular totales
    SELECT
        SUM(cantidad * precio_unitario) INTO subtotal_calculado
    FROM orden_items
    WHERE id_orden = nueva_orden_id;

    iva_19_calculado := ROUND(subtotal_calculado * 0.19, 2);
    total_con_iva := subtotal_calculado + iva_19_calculado;

    -- Paso 4: Actualizar el total en la orden
    UPDATE ordenes
    SET total = total_con_iva
    WHERE id_orden = nueva_orden_id;

    -- Mostrar resumen
    RAISE NOTICE 'Subtotal: $%', subtotal_calculado;
    RAISE NOTICE 'IVA (19%%): $%', iva_19_calculado;
    RAISE NOTICE 'TOTAL: $%', total_con_iva;
END $$;

-- Verificar la compra registrada
SELECT
    o.id_orden,
    u.nombre AS cliente,
    TO_CHAR(o.fecha, 'DD/MM/YYYY') AS fecha,
    COUNT(oi.id_item) AS cantidad_productos,
    ROUND(SUM(oi.cantidad * oi.precio_unitario), 2) AS subtotal,
    ROUND(SUM(oi.cantidad * oi.precio_unitario) * 0.19, 2) AS iva,
    o.total AS total_final
FROM ordenes o
JOIN usuarios u ON o.id_usuario = u.id_usuario
JOIN orden_items oi ON o.id_orden = oi.id_orden
WHERE o.fecha = '2022-12-15'
GROUP BY o.id_orden, u.nombre, o.fecha, o.total;</code></pre>
                        </div>

                        <div class="query-results" id="results-query3"></div>

                        <p><strong>‚úÖ Resultado:</strong> Orden creada - Subtotal: $1,137.96, IVA: $216.21, Total: $1,354.17</p>
                    </div>

                    <div class="card">
                        <h4>4Ô∏è‚É£ Ventas Diciembre 2022 - Total con IVA</h4>
                        <p><strong>Descripci√≥n:</strong> Calcular el total de ventas del mes de diciembre 2022 con IVA incluido</p>

                        <div class="code-block">
                            <button class="execute-btn" onclick="executeQuery(this, 'query4')">‚ñ∂ Ejecutar SQL</button>
                            <button class="copy-btn" onclick="copyCode(this, 'query4')">üìã Copiar</button>
                            <pre><code class="language-sql" id="query4">-- ============================================================================
-- CONSULTA 4: TOTAL DE VENTAS - Diciembre 2022
-- ============================================================================

-- Resumen general de ventas de diciembre 2022
SELECT
    COUNT(DISTINCT o.id_orden) AS total_ordenes,
    SUM(oi.cantidad) AS unidades_vendidas,
    SUM(oi.cantidad * oi.precio_unitario) AS total_neto,
    ROUND(SUM(oi.cantidad * oi.precio_unitario) * 0.19, 2) AS iva_19_porciento,
    ROUND(SUM(oi.cantidad * oi.precio_unitario) * 1.19, 2) AS total_con_iva
FROM ordenes o
JOIN orden_items oi ON oi.id_orden = o.id_orden
WHERE o.fecha BETWEEN '2022-12-01' AND '2022-12-31';

-- Detalle de cada orden en diciembre 2022
SELECT
    o.id_orden,
    u.nombre AS cliente,
    TO_CHAR(o.fecha, 'DD/MM/YYYY') AS fecha,
    COUNT(oi.id_item) AS items_distintos,
    SUM(oi.cantidad) AS unidades_totales,
    ROUND(SUM(oi.cantidad * oi.precio_unitario), 2) AS total_orden
FROM ordenes o
JOIN usuarios u ON o.id_usuario = u.id_usuario
JOIN orden_items oi ON oi.id_orden = o.id_orden
WHERE o.fecha BETWEEN '2022-12-01' AND '2022-12-31'
GROUP BY o.id_orden, u.nombre, o.fecha
ORDER BY o.fecha;</code></pre>
                        </div>

                        <div class="query-results" id="results-query4"></div>

                        <p><strong>‚úÖ Resultado:</strong> 3 √≥rdenes - Total neto: $2,007.92, IVA: $381.50, Total con IVA: $2,389.42</p>
                    </div>

                    <div class="card">
                        <h4>5Ô∏è‚É£ Usuario con M√°s Compras - A√±o 2022</h4>
                        <p><strong>Descripci√≥n:</strong> Identificar al usuario que realiz√≥ m√°s compras durante el a√±o 2022 y analizar su comportamiento</p>

                        <div class="code-block">
                            <button class="execute-btn" onclick="executeQuery(this, 'query5')">‚ñ∂ Ejecutar SQL</button>
                            <button class="copy-btn" onclick="copyCode(this, 'query5')">üìã Copiar</button>
                            <pre><code class="language-sql" id="query5">-- ============================================================================
-- CONSULTA 5: USUARIO CON M√ÅS COMPRAS - A√±o 2022
-- ============================================================================

-- Paso 1: Identificar al usuario con m√°s √≥rdenes en 2022
WITH por_usuario AS (
    SELECT
        u.id_usuario,
        u.nombre,
        u.email,
        COUNT(o.id_orden) AS total_ordenes,
        SUM(o.total) AS monto_total_gastado,
        MIN(o.fecha) AS primera_compra,
        MAX(o.fecha) AS ultima_compra
    FROM usuarios u
    JOIN ordenes o ON o.id_usuario = u.id_usuario
    WHERE o.fecha BETWEEN '2022-01-01' AND '2022-12-31'
    GROUP BY u.id_usuario, u.nombre, u.email
)
SELECT
    id_usuario,
    nombre AS cliente,
    email,
    total_ordenes AS numero_ordenes,
    ROUND(monto_total_gastado, 2) AS gasto_total,
    ROUND(monto_total_gastado / total_ordenes, 2) AS ticket_promedio,
    TO_CHAR(primera_compra, 'DD/MM/YYYY') AS primera_compra,
    TO_CHAR(ultima_compra, 'DD/MM/YYYY') AS ultima_compra
FROM por_usuario
ORDER BY total_ordenes DESC, monto_total_gastado DESC
LIMIT 1;

-- Paso 2: Detalle de todas las √≥rdenes del usuario con m√°s compras
SELECT
    o.id_orden,
    TO_CHAR(o.fecha, 'DD/MM/YYYY') AS fecha,
    COUNT(oi.id_item) AS productos_diferentes,
    SUM(oi.cantidad) AS unidades_totales,
    STRING_AGG(p.nombre || ' (x' || oi.cantidad || ')', ', ' ORDER BY oi.id_item) AS productos_comprados,
    ROUND(o.total, 2) AS total_orden
FROM ordenes o
JOIN orden_items oi ON oi.id_orden = o.id_orden
JOIN productos p ON p.id_producto = oi.id_producto
WHERE o.id_usuario = (
    SELECT id_usuario
    FROM ordenes
    WHERE fecha BETWEEN '2022-01-01' AND '2022-12-31'
    GROUP BY id_usuario
    ORDER BY COUNT(*) DESC
    LIMIT 1
)
AND o.fecha BETWEEN '2022-01-01' AND '2022-12-31'
GROUP BY o.id_orden, o.fecha, o.total
ORDER BY o.fecha;

-- Paso 3: Ranking de todos los usuarios por n√∫mero de compras
SELECT
    ROW_NUMBER() OVER (ORDER BY COUNT(o.id_orden) DESC) AS ranking,
    u.nombre AS cliente,
    COUNT(o.id_orden) AS total_ordenes,
    ROUND(SUM(o.total), 2) AS gasto_total
FROM usuarios u
JOIN ordenes o ON o.id_usuario = u.id_usuario
WHERE o.fecha BETWEEN '2022-01-01' AND '2022-12-31'
GROUP BY u.id_usuario, u.nombre
ORDER BY total_ordenes DESC, gasto_total DESC;</code></pre>
                        </div>

                        <div class="query-results" id="results-query5"></div>

                        <p><strong>‚úÖ Resultado:</strong> Mar√≠a Gonz√°lez - 4 √≥rdenes | Gasto Total: $1,065,930 | Ticket Promedio: $266,482.50</p>
                    </div>

                </div>

                <!-- TAB 6: RESULTADOS -->
            </div>

            <!-- TAB: RESULTADOS -->
            <div id="results" class="tab-content">
                <div class="section">
                    <h2>üìà Resultados de Consultas</h2>

                    <h3>Consulta 1: Productos con Descuento del 20%</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Producto</th>
                                <th>Precio Original</th>
                                <th>Precio con Descuento</th>
                                <th>Ahorro</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>Laptop HP 15"</td>
                                <td>$599,990</td>
                                <td>$479,992</td>
                                <td class="highlight">-$119,998</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Mouse Logitech MX Master</td>
                                <td>$49,990</td>
                                <td>$39,992</td>
                                <td class="highlight">-$9,998</td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Teclado Mec√°nico RGB</td>
                                <td>$79,990</td>
                                <td>$63,992</td>
                                <td class="highlight">-$15,998</td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>Monitor Samsung 24"</td>
                                <td>$189,990</td>
                                <td>$151,992</td>
                                <td class="highlight">-$37,998</td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>Aud√≠fonos Sony WH-1000XM4</td>
                                <td>$249,990</td>
                                <td>$199,992</td>
                                <td class="highlight">-$49,998</td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td>WebCam Logitech HD</td>
                                <td>$39,990</td>
                                <td>$31,992</td>
                                <td class="highlight">-$7,998</td>
                            </tr>
                            <tr>
                                <td>7</td>
                                <td>Disco Duro Externo 1TB</td>
                                <td>$59,990</td>
                                <td>$47,992</td>
                                <td class="highlight">-$11,998</td>
                            </tr>
                            <tr>
                                <td>8</td>
                                <td>Memoria RAM 16GB DDR4</td>
                                <td>$69,990</td>
                                <td>$55,992</td>
                                <td class="highlight">-$13,998</td>
                            </tr>
                            <tr>
                                <td>9</td>
                                <td>SSD Samsung 500GB</td>
                                <td>$89,990</td>
                                <td>$71,992</td>
                                <td class="highlight">-$17,998</td>
                            </tr>
                            <tr>
                                <td>10</td>
                                <td>Hub USB-C 7 puertos</td>
                                <td>$29,990</td>
                                <td>$23,992</td>
                                <td class="highlight">-$5,998</td>
                            </tr>
                            <tr>
                                <td>11</td>
                                <td>Cable HDMI 2.0 3m</td>
                                <td>$12,990</td>
                                <td>$10,392</td>
                                <td class="highlight">-$2,598</td>
                            </tr>
                            <tr>
                                <td>12</td>
                                <td>Mousepad Gaming XXL</td>
                                <td>$19,990</td>
                                <td>$15,992</td>
                                <td class="highlight">-$3,998</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="alert alert-info">
                        <strong>üìä Total:</strong> 12 productos actualizados con descuento del 20% | Ahorro total para clientes: $297,576
                    </div>

                    <h3>Consulta 2: Productos con Stock Cr√≠tico</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Producto</th>
                                <th>Stock</th>
                                <th>Estado Stock</th>
                                <th>Acci√≥n Recomendada</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>10</td>
                                <td>Hub USB-C 7 puertos</td>
                                <td><strong>2</strong></td>
                                <td><span class="badge badge-danger">CR√çTICO</span></td>
                                <td><span class="badge badge-danger">REPOSICI√ìN URGENTE</span></td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td>WebCam Logitech HD</td>
                                <td><strong>3</strong></td>
                                <td><span class="badge badge-danger">BAJO</span></td>
                                <td><span class="badge badge-warning">PROGRAMAR REPOSICI√ìN</span></td>
                            </tr>
                            <tr>
                                <td>12</td>
                                <td>Mousepad Gaming XXL</td>
                                <td><strong>4</strong></td>
                                <td><span class="badge badge-warning">BAJO</span></td>
                                <td><span class="badge badge-warning">PROGRAMAR REPOSICI√ìN</span></td>
                            </tr>
                            <tr>
                                <td>8</td>
                                <td>Memoria RAM 16GB DDR4</td>
                                <td><strong>5</strong></td>
                                <td><span class="badge badge-warning">BAJO</span></td>
                                <td><span class="badge badge-warning">PROGRAMAR REPOSICI√ìN</span></td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="alert alert-info">
                        <strong>‚ö†Ô∏è Alerta:</strong> 4 productos requieren reposici√≥n urgente | Stock total cr√≠tico: 14 unidades
                    </div>

                    <h3>Consulta 3: Simulaci√≥n de Compra</h3>
                    <div class="card">
                        <h4>Detalle de la Compra</h4>
                        <table>
                            <thead>
                                <tr>
                                    <th>Producto</th>
                                    <th>Cantidad</th>
                                    <th>Precio Unitario</th>
                                    <th>Subtotal</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Laptop HP 15"</td>
                                    <td>1</td>
                                    <td>$599,990</td>
                                    <td>$599,990</td>
                                </tr>
                                <tr>
                                    <td>Mouse Logitech MX Master</td>
                                    <td>2</td>
                                    <td>$49,990</td>
                                    <td>$99,980</td>
                                </tr>
                                <tr>
                                    <td>Teclado Mec√°nico RGB</td>
                                    <td>1</td>
                                    <td>$79,990</td>
                                    <td>$79,990</td>
                                </tr>
                                <tr>
                                    <td>Aud√≠fonos Sony WH-1000XM4</td>
                                    <td>1</td>
                                    <td>$249,990</td>
                                    <td>$249,990</td>
                                </tr>
                            </tbody>
                        </table>
                        <table>
                            <thead>
                                <tr>
                                    <th>Concepto</th>
                                    <th>Monto</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Subtotal</strong></td>
                                    <td>$1,029,950</td>
                                </tr>
                                <tr>
                                    <td><strong>IVA (19%)</strong></td>
                                    <td>$195,690.50</td>
                                </tr>
                                <tr style="background: #e8f5e9;">
                                    <td><strong>TOTAL CON IVA</strong></td>
                                    <td><strong>$1,225,640.50</strong></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h3>Consulta 4: Ventas de Diciembre 2022</h3>
                    <div class="card">
                        <h4>üìä Resumen General</h4>
                        <table>
                            <thead>
                                <tr>
                                    <th>Total √ìrdenes</th>
                                    <th>Unidades Vendidas</th>
                                    <th>Total Neto</th>
                                    <th>IVA (19%)</th>
                                    <th>Total con IVA</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="background: #e8f5e9;">
                                    <td><strong>3 √≥rdenes</strong></td>
                                    <td><strong>7 productos</strong></td>
                                    <td><strong>$2,007,920</strong></td>
                                    <td><strong>$381,505</strong></td>
                                    <td><strong>$2,389,425</strong></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h4>üìã Detalle de √ìrdenes de Diciembre 2022</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>ID Orden</th>
                                <th>Cliente</th>
                                <th>Fecha</th>
                                <th>Items Distintos</th>
                                <th>Unidades Totales</th>
                                <th>Total Orden</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>Mar√≠a Gonz√°lez</td>
                                <td>05/12/2022</td>
                                <td>3 items</td>
                                <td>5 unidades</td>
                                <td>$949,960</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Juan P√©rez</td>
                                <td>10/12/2022</td>
                                <td>2 items</td>
                                <td>2 unidades</td>
                                <td>$639,980</td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Ana Mart√≠nez</td>
                                <td>15/12/2022</td>
                                <td>2 items</td>
                                <td>3 unidades</td>
                                <td>$417,980</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="grid">
                        <div class="stat-card">
                            <h3>3</h3>
                            <p>√ìrdenes Totales</p>
                        </div>
                        <div class="stat-card">
                            <h3>$2.01M</h3>
                            <p>Ventas Netas</p>
                        </div>
                        <div class="stat-card">
                            <h3>$381.5K</h3>
                            <p>IVA Recaudado</p>
                        </div>
                        <div class="stat-card">
                            <h3>$2.39M</h3>
                            <p>Total con IVA</p>
                        </div>
                    </div>

                    <h3>Consulta 5: Usuario con M√°s Compras</h3>
                    <div class="card">
                        <h4>üèÜ Cliente Destacado 2022</h4>
                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Cliente</th>
                                    <th>Email</th>
                                    <th>N¬∞ √ìrdenes</th>
                                    <th>Gasto Total</th>
                                    <th>Ticket Promedio</th>
                                    <th>Primera Compra</th>
                                    <th>√öltima Compra</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="background: #fff3cd;">
                                    <td><strong>1</strong></td>
                                    <td><strong>Mar√≠a Gonz√°lez</strong></td>
                                    <td>maria.gonzalez@email.com</td>
                                    <td><strong>4 √≥rdenes</strong></td>
                                    <td><strong>$1,065,930</strong></td>
                                    <td><strong>$266,482.50</strong></td>
                                    <td>05/12/2022</td>
                                    <td>28/12/2022</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h4>üìã Detalle de Compras de Mar√≠a Gonz√°lez en 2022</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>ID Orden</th>
                                <th>Fecha</th>
                                <th>Productos Diferentes</th>
                                <th>Unidades Totales</th>
                                <th>Productos Comprados</th>
                                <th>Total Orden</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>05/12/2022</td>
                                <td>3</td>
                                <td>5</td>
                                <td>Laptop HP (x2), Monitor Samsung (x2), Cable HDMI (x1)</td>
                                <td>$949,960</td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>18/12/2022</td>
                                <td>1</td>
                                <td>1</td>
                                <td>Laptop HP (x1)</td>
                                <td>$89,990</td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>20/12/2022</td>
                                <td>1</td>
                                <td>1</td>
                                <td>Mouse Logitech (x1)</td>
                                <td>$12,990</td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td>28/12/2022</td>
                                <td>1</td>
                                <td>1</td>
                                <td>Teclado Mec√°nico (x1)</td>
                                <td>$12,990</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>üìä Ranking de Usuarios por Compras en 2022</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Ranking</th>
                                <th>Cliente</th>
                                <th>Total √ìrdenes</th>
                                <th>Gasto Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="background: #fff3cd;">
                                <td>ü•á 1</td>
                                <td><strong>Mar√≠a Gonz√°lez</strong></td>
                                <td><strong>4 √≥rdenes</strong></td>
                                <td><strong>$1,065,930</strong></td>
                            </tr>
                            <tr>
                                <td>ü•à 2</td>
                                <td>Juan P√©rez</td>
                                <td>3 √≥rdenes</td>
                                <td>$719,970</td>
                            </tr>
                            <tr>
                                <td>ü•â 3</td>
                                <td>Ana Mart√≠nez</td>
                                <td>2 √≥rdenes</td>
                                <td>$467,970</td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>Carlos Rodr√≠guez</td>
                                <td>2 √≥rdenes</td>
                                <td>$159,980</td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>Laura Fern√°ndez</td>
                                <td>1 orden</td>
                                <td>$39,990</td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td>Pedro L√≥pez</td>
                                <td>1 orden</td>
                                <td>$29,990</td>
                            </tr>
                            <tr>
                                <td>7</td>
                                <td>Sof√≠a Torres</td>
                                <td>1 orden</td>
                                <td>$19,990</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>An√°lisis Adicional: Top 5 Productos M√°s Vendidos</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Posici√≥n</th>
                                <th>Producto</th>
                                <th>Unidades Vendidas</th>
                                <th>Ingresos Generados</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>ü•á 1</td>
                                <td>Cable HDMI 2.0 3m</td>
                                <td>6 unidades</td>
                                <td>$77,940</td>
                            </tr>
                            <tr>
                                <td>ü•à 2</td>
                                <td>Disco Duro Externo 1TB</td>
                                <td>5 unidades</td>
                                <td>$299,950</td>
                            </tr>
                            <tr>
                                <td>ü•â 3</td>
                                <td>Laptop HP 15"</td>
                                <td>4 unidades</td>
                                <td>$2,399,960</td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>Monitor Samsung 24"</td>
                                <td>4 unidades</td>
                                <td>$759,960</td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>Mouse Logitech MX Master</td>
                                <td>4 unidades</td>
                                <td>$199,960</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- TAB: EVIDENCIAS -->
            <div id="evidence" class="tab-content">
                <div class="section">
                    <h2>‚úÖ Evidencias de Cumplimiento</h2>

                    <div class="alert alert-success">
                        <strong>‚úÖ Proyecto Completo:</strong> Todos los requisitos del M√≥dulo 5 han sido implementados y probados exitosamente.
                    </div>

                    <h3>Checklist de Requisitos</h3>
                    <div class="card">
                        <h4>A) Modelado (Entity-Relationship ER)</h4>
                        <ul style="padding-left: 20px;">
                            <li>‚úÖ Diagrama ER dise√±ado con 5 entidades: usuarios, productos, inventario, ordenes, orden_items</li>
                            <li>‚úÖ Relaciones definidas: usuarios 1:N ordenes, ordenes 1:N orden_items, productos 1:N orden_items, productos 1:1 inventario</li>
                            <li>‚úÖ Diagrama textual incluido en documentaci√≥n</li>
                        </ul>
                    </div>

                    <div class="card">
                        <h4>B) DDL ‚Äî Creaci√≥n de Tablas</h4>
                        <ul style="padding-left: 20px;">
                            <li>‚úÖ Script .sql completo con CREATE TABLE para las 5 tablas</li>
                            <li>‚úÖ Primary Keys (PK) definidas en todas las tablas</li>
                            <li>‚úÖ Foreign Keys (FK) con integridad referencial</li>
                            <li>‚úÖ CHECK constraints: stock >= 0, cantidad > 0, precio >= 0</li>
                            <li>‚úÖ UNIQUE constraint en email de usuarios</li>
                            <li>‚úÖ DEFAULT values: timestamps, booleanos, valores num√©ricos</li>
                            <li>‚úÖ √çndices creados: por fecha, id_usuario, id_orden, id_producto, email</li>
                            <li>‚úÖ ON DELETE CASCADE y RESTRICT implementados</li>
                        </ul>
                    </div>

                    <div class="card">
                        <h4>C) DML ‚Äî Poblamiento de Datos</h4>
                        <ul style="padding-left: 20px;">
                            <li>‚úÖ 7 usuarios insertados (‚â• 5 requeridos)</li>
                            <li>‚úÖ 12 productos insertados (‚â• 5 requeridos)</li>
                            <li>‚úÖ 12 registros de inventario (‚â• 5 requeridos)</li>
                            <li>‚úÖ 14 √≥rdenes insertadas (‚â• 5 requeridas)</li>
                            <li>‚úÖ 40+ items de orden insertados (‚â• 5 requeridos)</li>
                            <li>‚úÖ Datos coherentes y realistas</li>
                        </ul>
                    </div>

                    <div class="card">
                        <h4>D) Consultas Requeridas</h4>
                        <ul style="padding-left: 20px;">
                            <li>‚úÖ <strong>Consulta 1:</strong> Oferta verano con descuento del 20% - UPDATE implementado</li>
                            <li>‚úÖ <strong>Consulta 2:</strong> Stock cr√≠tico (‚â§ 5 unidades) - SELECT con JOIN</li>
                            <li>‚úÖ <strong>Consulta 3:</strong> Simulaci√≥n de compra con ‚â• 3 productos, c√°lculo de subtotal, IVA 19% y total</li>
                            <li>‚úÖ <strong>Consulta 4:</strong> Total de ventas diciembre 2022 - Agregaciones y filtro por fecha</li>
                            <li>‚úÖ <strong>Consulta 5:</strong> Usuario con m√°s compras en 2022 - CTE, GROUP BY, ORDER BY, LIMIT</li>
                        </ul>
                    </div>

                    <h3>Estructura del Repositorio</h3>
                    <pre>
üìÅ Ejercicio_Practico_Desarrollo_Portafolio_Mod5
‚îú‚îÄ‚îÄ üìÑ index.html           # Sitio web con resultados y evidencias
‚îú‚îÄ‚îÄ üìÑ README.md            # Documentaci√≥n del proyecto
‚îú‚îÄ‚îÄ üìÑ Link GitHub.txt      # Enlace al repositorio
‚îú‚îÄ‚îÄ üìÅ er/
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ diagrama_er.txt  # Diagrama Entidad-Relaci√≥n
‚îî‚îÄ‚îÄ üìÅ sql/
    ‚îî‚îÄ‚îÄ üìÑ script.sql       # DDL + DML + Consultas completas
</pre>

                    <h3>Gu√≠as T√©cnicas Implementadas</h3>
                    <div class="card">
                        <ul style="padding-left: 20px;">
                            <li>‚úÖ <strong>Convenciones de nombres:</strong> min√∫sculas y snake_case (usuarios, orden_items, id_producto)</li>
                            <li>‚úÖ <strong>Integridad referencial:</strong> ON DELETE CASCADE en inventario y orden_items, RESTRICT en ordenes y productos</li>
                            <li>‚úÖ <strong>√çndices:</strong> 5 √≠ndices creados para optimizaci√≥n de consultas</li>
                            <li>‚úÖ <strong>Comentarios:</strong> Cada secci√≥n del script documentada con -- y separadores visibles</li>
                            <li>‚úÖ <strong>Semillas (seed):</strong> Datos de ejemplo bien estructurados para poblamiento r√°pido</li>
                        </ul>
                    </div>

                    <h3>C√≥mo Ejecutar el Proyecto</h3>
                    <div class="card">
                        <h4>üìã Prerequisitos</h4>
                        <ul style="padding-left: 20px;">
                            <li>PostgreSQL 12 o superior</li>
                            <li>pgAdmin 4 o acceso a psql</li>
                            <li>Permisos para crear bases de datos</li>
                        </ul>

                        <h4>üöÄ Pasos de Instalaci√≥n</h4>
                        <pre><code># 1. Conectarse a PostgreSQL
psql -U postgres

# 2. Crear la base de datos
CREATE DATABASE ecommerce_db;

# 3. Conectarse a la nueva base de datos
\c ecommerce_db

# 4. Ejecutar el script completo
\i 'ruta/completa/sql/script.sql'

# 5. Verificar las tablas creadas
\dt</code></pre>
                    </div>

                    <h3>Tecnolog√≠as Utilizadas</h3>
                    <div class="grid">
                        <div class="stat-card">
                            <h3>üêò</h3>
                            <p>PostgreSQL 12+</p>
                        </div>
                        <div class="stat-card">
                            <h3>üõ†Ô∏è</h3>
                            <p>pgAdmin 4</p>
                        </div>
                        <div class="stat-card">
                            <h3>üìù</h3>
                            <p>SQL Est√°ndar</p>
                        </div>
                        <div class="stat-card">
                            <h3>üé®</h3>
                            <p>HTML/CSS</p>
                        </div>
                    </div>

                    <div class="alert alert-info">
                        <strong>üìö Repositorio GitHub:</strong> Este proyecto est√° disponible en GitHub con todo el c√≥digo fuente, documentaci√≥n y evidencias de ejecuci√≥n.
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p><strong>M√≥dulo 5 - Modelado y Consultas SQL (PostgreSQL)</strong></p>
            <p>Talento Digital - Curso Fullstack</p>
            <p>¬© 2026 - Sistema E-Commerce con PostgreSQL</p>
        </footer>
    </div>

    <script>
        function openTab(evt, tabName) {
            // Ocultar contenido de las tabs
            const tabContents = document.getElementsByClassName('tab-content');
            for (const content of tabContents) {
                content.classList.remove('active');
            }

            // Remover la clase active de todos los botones
            const tabButtons = document.getElementsByClassName('tab-button');
            for (const btn of tabButtons) {
                btn.classList.remove('active');
            }

            // Mostrar el contenido actual y marcar el bot√≥n como activo
            document.getElementById(tabName).classList.add('active');
            evt.currentTarget.classList.add('active');
        }

        // Funci√≥n para copiar c√≥digo al portapapeles
        function copyCode(button, codeId) {
            const codeElement = document.getElementById(codeId);
            const textToCopy = codeElement.textContent;

            // Copiar al portapapeles
            navigator.clipboard.writeText(textToCopy).then(() => {
                // Cambiar el texto del bot√≥n temporalmente
                const originalText = button.textContent;
                button.textContent = '‚úì Copiado';
                button.classList.add('copied');

                // Restaurar despu√©s de 2 segundos
                setTimeout(() => {
                    button.textContent = originalText;
                    button.classList.remove('copied');
                }, 2000);
            }).catch(err => {
                console.error('Error al copiar:', err);
                alert('No se pudo copiar el c√≥digo. Por favor, c√≥pialo manualmente.');
            });
        }

        // Animaci√≥n de n√∫meros al cargar
        document.addEventListener('DOMContentLoaded', function() {
            const statCards = document.querySelectorAll('.stat-card h3');
            statCards.forEach(card => {
                const text = card.textContent;
                if (text.includes('$')) return; // Skip money values

                const number = Number.parseInt(text, 10);
                if (!Number.isNaN(number)) {
                    let current = 0;
                    const increment = number / 50;
                    const timer = setInterval(() => {
                        current += increment;
                        if (current >= number) {
                            card.textContent = text;
                            clearInterval(timer);
                        } else {
                            card.textContent = Math.floor(current) + (text.includes('+') ? '+' : '');
                        }
                    }, 20);
                }
            });
        });
    </script>
</body>
</html>
